<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArxisVR AI Demo - Machine Learning Real</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 48px;
    }

    .subtitle {
      text-align: center;
      color: #4ecdc4;
      margin-bottom: 40px;
      font-size: 20px;
    }

    .demo-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    h2 {
      color: #4ecdc4;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin: 5px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn.success {
      background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
    }

    .btn.danger {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    }

    .output {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 20px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.8;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    input[type="text"] {
      flex: 1;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #fff;
      font-size: 16px;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #4ecdc4;
    }

    .chat-history {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

    .chat-message {
      padding: 10px 15px;
      margin: 10px 0;
      border-radius: 8px;
    }

    .chat-message.user {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin-left: 20%;
    }

    .chat-message.assistant {
      background: rgba(78, 205, 196, 0.2);
      border-left: 4px solid #4ecdc4;
    }

    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    .status.ready {
      background: rgba(78, 205, 196, 0.2);
      color: #4ecdc4;
    }

    .status.loading {
      background: rgba(254, 202, 87, 0.2);
      color: #feca57;
    }

    .status.error {
      background: rgba(255, 107, 107, 0.2);
      color: #ff6b6b;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .card h3 {
      color: #4ecdc4;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .card p {
      line-height: 1.6;
      opacity: 0.9;
    }

    .highlight {
      color: #4ecdc4;
      font-weight: 600;
    }

    .scrollbar::-webkit-scrollbar {
      width: 8px;
    }

    .scrollbar::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }

    .scrollbar::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü§ñ ArxisVR AI Demo</h1>
    <p class="subtitle">Machine Learning Real com TensorFlow.js</p>

    <!-- INICIALIZA√á√ÉO -->
    <div class="demo-section">
      <h2>üöÄ 1. Inicializa√ß√£o <span class="status ready" id="initStatus">Pronto</span></h2>
      <p>Inicialize todos os sistemas de IA antes de usar:</p>
      <button class="btn" onclick="initializeAI()">Inicializar IA</button>
      <button class="btn success" onclick="showInfo()">Ver Info</button>
      <button class="btn danger" onclick="runDemo()">Demo R√°pido</button>
      <div class="output scrollbar" id="initOutput">Aguardando inicializa√ß√£o...</div>
    </div>

    <!-- CHATBOT -->
    <div class="demo-section">
      <h2>üí¨ 2. Chatbot com NLP Real</h2>
      <p>Converse com o assistente usando processamento de linguagem natural:</p>
      <div class="chat-history scrollbar" id="chatHistory"></div>
      <div class="input-group">
        <input 
          type="text" 
          id="chatInput" 
          placeholder="Pergunte algo... (ex: Quantas paredes tem?)"
          onkeypress="if(event.key==='Enter') sendMessage()"
        />
        <button class="btn success" onclick="sendMessage()">Enviar</button>
      </div>
      <div style="margin-top: 10px;">
        <button class="btn" onclick="askQuestion('Ol√°!')">Ol√°!</button>
        <button class="btn" onclick="askQuestion('O que voc√™ pode fazer?')">Ajuda</button>
        <button class="btn" onclick="askQuestion('Quantas janelas tem?')">Quantidades</button>
        <button class="btn" onclick="askQuestion('Tem colis√µes?')">Colis√µes</button>
      </div>
    </div>

    <!-- NLP AN√ÅLISE -->
    <div class="demo-section">
      <h2>üó£Ô∏è 3. An√°lise NLP</h2>
      <div class="grid">
        <div class="card">
          <h3>Intent Classification</h3>
          <button class="btn" onclick="testIntent()">Testar</button>
          <div class="output scrollbar" id="intentOutput" style="max-height: 200px;">-</div>
        </div>
        <div class="card">
          <h3>Sentiment Analysis</h3>
          <button class="btn" onclick="testSentiment()">Testar</button>
          <div class="output scrollbar" id="sentimentOutput" style="max-height: 200px;">-</div>
        </div>
        <div class="card">
          <h3>Semantic Similarity</h3>
          <button class="btn" onclick="testSimilarity()">Testar</button>
          <div class="output scrollbar" id="similarityOutput" style="max-height: 200px;">-</div>
        </div>
      </div>
    </div>

    <!-- MACHINE LEARNING -->
    <div class="demo-section">
      <h2>üß† 4. Machine Learning</h2>
      <div class="grid">
        <div class="card">
          <h3>Feature Extraction</h3>
          <p>Extrair 20 features de elementos IFC</p>
          <button class="btn" onclick="testFeatures()">Extrair</button>
        </div>
        <div class="card">
          <h3>Clustering (K-means++)</h3>
          <p>Agrupar elementos similares</p>
          <button class="btn" onclick="testClustering()">Agrupar</button>
        </div>
        <div class="card">
          <h3>Anomaly Detection</h3>
          <p>Detectar elementos an√¥malos</p>
          <button class="btn" onclick="testAnomalies()">Detectar</button>
        </div>
      </div>
      <div class="output scrollbar" id="mlOutput" style="margin-top: 15px;">Aguardando teste...</div>
    </div>

    <!-- PREDICTIVE ANALYTICS -->
    <div class="demo-section">
      <h2>üìà 5. An√°lise Preditiva</h2>
      <button class="btn" onclick="testCostPrediction()">Prever Custos</button>
      <button class="btn" onclick="testTimelinePrediction()">Prever Prazo</button>
      <button class="btn" onclick="testRiskAssessment()">Avaliar Riscos</button>
      <div class="output scrollbar" id="predictiveOutput">Aguardando an√°lise...</div>
    </div>
  </div>

  <script type="module">
    import { aiIntegration } from './src/ai/AIIntegration.ts';
    import { nlpEngine } from './src/ai/NLPEngine.ts';
    import { tensorflowEngine } from './src/ai/TensorFlowEngine.ts';
    
    // Disponibilizar globalmente
    window.ai = aiIntegration;
    window.nlpEngine = nlpEngine;
    window.tensorflowEngine = tensorflowEngine;
    
    // Fun√ß√µes globais
    window.initializeAI = async () => {
      const status = document.getElementById('initStatus');
      const output = document.getElementById('initOutput');
      
      status.textContent = 'Carregando...';
      status.className = 'status loading';
      output.textContent = 'Inicializando sistemas de IA...\n\n';
      
      try {
        await aiIntegration.initializeAll();
        output.textContent += '\n‚úÖ Sistema completamente inicializado!';
        status.textContent = 'Pronto';
        status.className = 'status ready';
      } catch (error) {
        output.textContent += `\n‚ùå Erro: ${error.message}`;
        status.textContent = 'Erro';
        status.className = 'status error';
      }
    };
    
    window.showInfo = () => {
      aiIntegration.printSystemInfo();
    };
    
    window.runDemo = async () => {
      const output = document.getElementById('initOutput');
      output.textContent = 'Executando demo...\n\n';
      await aiIntegration.quickDemo();
    };
    
    window.sendMessage = async () => {
      const input = document.getElementById('chatInput');
      const history = document.getElementById('chatHistory');
      const message = input.value.trim();
      
      if (!message) return;
      
      // Adicionar mensagem do usu√°rio
      history.innerHTML += `<div class="chat-message user">${message}</div>`;
      input.value = '';
      
      // Mostrar loading
      history.innerHTML += `<div class="chat-message assistant" id="typing">...</div>`;
      history.scrollTop = history.scrollHeight;
      
      // Obter resposta
      const response = await aiIntegration.chat(message);
      
      // Remover loading e mostrar resposta
      document.getElementById('typing').remove();
      history.innerHTML += `<div class="chat-message assistant">${response}</div>`;
      history.scrollTop = history.scrollHeight;
    };
    
    window.askQuestion = (question) => {
      document.getElementById('chatInput').value = question;
      sendMessage();
    };
    
    window.testIntent = async () => {
      const output = document.getElementById('intentOutput');
      const tests = [
        "Quantas paredes tem?",
        "Tem alguma colis√£o?",
        "Qual o custo estimado?",
        "Como otimizar o projeto?"
      ];
      
      output.textContent = '';
      for (const text of tests) {
        const intent = await nlpEngine.classifyIntent(text);
        output.textContent += `üìù "${text}"\n`;
        output.textContent += `   Inten√ß√£o: ${intent.name}\n`;
        output.textContent += `   Confian√ßa: ${(intent.confidence * 100).toFixed(1)}%\n\n`;
      }
    };
    
    window.testSentiment = () => {
      const output = document.getElementById('sentimentOutput');
      const tests = [
        "Projeto est√° √≥timo!",
        "Tem muitos problemas...",
        "Est√° normal"
      ];
      
      output.textContent = '';
      for (const text of tests) {
        const sentiment = nlpEngine.analyzeSentiment(text);
        output.textContent += `üìù "${text}"\n`;
        output.textContent += `   ${sentiment.label} (${sentiment.score.toFixed(2)})\n\n`;
      }
    };
    
    window.testSimilarity = () => {
      const output = document.getElementById('similarityOutput');
      const pairs = [
        ["Quantas janelas?", "N√∫mero de janelas"],
        ["Custo total", "Pre√ßo do projeto"],
        ["Paredes altas", "Computador r√°pido"]
      ];
      
      output.textContent = '';
      for (const [text1, text2] of pairs) {
        const sim = nlpEngine.calculateSimilarity(text1, text2);
        output.textContent += `üìù "${text1}"\n`;
        output.textContent += `   vs "${text2}"\n`;
        output.textContent += `   Similaridade: ${(sim * 100).toFixed(1)}%\n\n`;
      }
    };
    
    console.log('‚úÖ Demo page loaded!');
    console.log('üí° Use: window.ai para acessar o sistema');
  </script>
</body>
</html>

import{C as y}from"./Card-DLSvBshn.js";import{B as u}from"./Button-BvNVdej2.js";import{T as f}from"./Toggle-D3VS2hV5.js";class _{card;lights=[];onLightChange;constructor(e){this.onLightChange=e?.onLightChange,this.card=new y({title:"ðŸ’¡ IluminaÃ§Ã£o",variant:"glass"}),this.initDefaultLights(),this.render()}initDefaultLights(){this.lights=[{id:"ambient",type:"ambient",name:"Luz Ambiente",enabled:!0,color:"#ffffff",intensity:.4},{id:"sun",type:"directional",name:"Sol (Direcional)",enabled:!0,color:"#ffffff",intensity:.8,position:{x:50,y:100,z:50},target:{x:0,y:0,z:0},castShadow:!0},{id:"hemisphere",type:"hemisphere",name:"HemisfÃ©rio (CÃ©u)",enabled:!1,color:"#87ceeb",intensity:.6}]}render(){const e=this.card.getBody();e.innerHTML="";const t=this.createSection("Presets"),n=document.createElement("div");n.className="arxis-lighting__presets",[{name:"â˜€ï¸ Dia",ambient:.5,sun:.9},{name:"ðŸŒ… Entardecer",ambient:.4,sun:.6},{name:"ðŸŒ™ Noite",ambient:.2,sun:.1},{name:"ðŸ¢ Interior",ambient:.6,sun:.3}].forEach(a=>{const s=new u({text:a.name,variant:"secondary",size:"sm"});s.getElement().addEventListener("click",()=>this.applyPreset(a.ambient,a.sun)),n.appendChild(s.getElement())}),t.appendChild(n),e.appendChild(t);const i=this.createSection("Luzes Ativas");this.lights.forEach(a=>{const s=this.createLightItem(a);i.appendChild(s)}),e.appendChild(i);const c=new u({text:"âž• Adicionar Luz",variant:"primary"});c.getElement().addEventListener("click",()=>this.showAddLightDialog()),e.appendChild(c.getElement());const m=this.createSection("ConfiguraÃ§Ãµes de Sombra"),l=new f({label:"Sombras Ativadas",checked:!0,onChange:a=>{console.log("Sombras:",a)}});m.appendChild(l.getElement()),e.appendChild(m)}createSection(e){const t=document.createElement("div");t.className="arxis-lighting__section";const n=document.createElement("h4");return n.className="arxis-lighting__section-title",n.textContent=e,t.appendChild(n),t}createLightItem(e){const t=document.createElement("div");t.className="arxis-lighting__light-item",e.enabled||t.classList.add("arxis-lighting__light-item--disabled");const n=document.createElement("div");n.className="arxis-lighting__light-header";const o=document.createElement("div");o.className="arxis-lighting__light-info";const i=document.createElement("span");i.className="arxis-lighting__light-icon",i.textContent=this.getLightIcon(e.type);const c=document.createElement("span");c.className="arxis-lighting__light-name",c.textContent=e.name,o.appendChild(i),o.appendChild(c);const m=new f({checked:e.enabled,onChange:l=>{e.enabled=l,this.render(),this.notifyChange()}});if(n.appendChild(o),n.appendChild(m.getElement()),t.appendChild(n),e.enabled){const l=document.createElement("div");l.className="arxis-lighting__control";const a=document.createElement("label");a.textContent="Cor:";const s=document.createElement("input");s.type="color",s.className="arxis-lighting__color",s.value=e.color,s.addEventListener("change",d=>{e.color=d.target.value,this.notifyChange()}),l.appendChild(a),l.appendChild(s),t.appendChild(l);const h=document.createElement("div");h.className="arxis-lighting__control";const C=document.createElement("label");C.textContent="Intensidade:";const r=document.createElement("input");r.type="range",r.className="arxis-lighting__slider",r.min="0",r.max="2",r.step="0.1",r.value=String(e.intensity);const g=document.createElement("span");if(g.className="arxis-lighting__value",g.textContent=e.intensity.toFixed(1),r.addEventListener("input",d=>{const p=parseFloat(d.target.value);e.intensity=p,g.textContent=p.toFixed(1),this.notifyChange()}),h.appendChild(C),h.appendChild(r),h.appendChild(g),t.appendChild(h),e.type!=="ambient"){const d=new u({text:"ðŸ—‘ï¸ Remover",variant:"danger",size:"sm"});d.getElement().addEventListener("click",()=>{this.lights=this.lights.filter(p=>p.id!==e.id),this.render(),this.notifyChange()}),t.appendChild(d.getElement())}}return t}getLightIcon(e){return{ambient:"ðŸŒ",directional:"â˜€ï¸",point:"ðŸ’¡",spot:"ðŸ”¦",hemisphere:"ðŸŒ¤ï¸"}[e]||"ðŸ’¡"}applyPreset(e,t){const n=this.lights.find(i=>i.type==="ambient"),o=this.lights.find(i=>i.type==="directional");n&&(n.intensity=e),o&&(o.intensity=t),this.render(),this.notifyChange()}showAddLightDialog(){const e=prompt("Tipo de luz (point, spot, directional):");if(!e)return;const t=prompt("Nome da luz:")||"Nova Luz",n={id:`light-${Date.now()}`,type:e,name:t,enabled:!0,color:"#ffffff",intensity:1,position:{x:0,y:10,z:0}};this.lights.push(n),this.render(),this.notifyChange()}notifyChange(){this.onLightChange?.(this.lights)}getLights(){return this.lights}getElement(){return this.card.getElement()}destroy(){this.card.destroy()}}export{_ as LightingPanel};

import{C as u}from"./Card-DLSvBshn.js";import{B as y}from"./Button-BvNVdej2.js";import{T as g}from"./Toggle-D3VS2hV5.js";class x{card;rules=[];globalOpacity=1;onTransparencyChange;constructor(e){this.onTransparencyChange=e?.onTransparencyChange,this.card=new u({title:"ðŸ‘ï¸ TransparÃªncia",variant:"glass"}),this.initDefaultRules(),this.render()}initDefaultRules(){this.rules=[{category:"Estrutura",enabled:!1,opacity:1,isolate:!1},{category:"Paredes",enabled:!1,opacity:1,isolate:!1},{category:"Pisos",enabled:!1,opacity:1,isolate:!1},{category:"Tetos",enabled:!1,opacity:1,isolate:!1},{category:"Esquadrias",enabled:!1,opacity:1,isolate:!1},{category:"MobiliÃ¡rio",enabled:!1,opacity:1,isolate:!1}]}render(){const e=this.card.getBody();e.innerHTML="";const t=this.createSection("Opacidade Global"),a=document.createElement("div");a.className="arxis-transparency__control";const n=document.createElement("input");n.type="range",n.className="arxis-transparency__slider",n.min="0",n.max="1",n.step="0.05",n.value=String(this.globalOpacity);const d=document.createElement("span");d.className="arxis-transparency__value",d.textContent=`${(this.globalOpacity*100).toFixed(0)}%`,n.addEventListener("input",p=>{const c=parseFloat(p.target.value);this.globalOpacity=c,d.textContent=`${(c*100).toFixed(0)}%`,this.notifyChange()}),a.appendChild(n),a.appendChild(d),t.appendChild(a),e.appendChild(t);const s=document.createElement("div");s.className="arxis-transparency__presets",[{name:"Opaco",value:1},{name:"75%",value:.75},{name:"50%",value:.5},{name:"25%",value:.25},{name:"Transparente",value:.1}].forEach(p=>{const c=new y({text:p.name,variant:"secondary",size:"sm"});c.getElement().addEventListener("click",()=>{this.globalOpacity=p.value,this.render(),this.notifyChange()}),s.appendChild(c.getElement())}),e.appendChild(s);const i=this.createSection("Controle por Categoria");this.rules.forEach(p=>{const c=this.createRuleItem(p);i.appendChild(c)}),e.appendChild(i);const l=this.createSection("Modos Especiais"),h=new y({text:"ðŸ©» Modo Raio-X",variant:"secondary"});h.getElement().addEventListener("click",()=>this.applyXRayMode());const r=new y({text:"ðŸ‘» Modo Fantasma",variant:"secondary"});r.getElement().addEventListener("click",()=>this.applyGhostMode());const o=new y({text:"ðŸ”„ Resetar",variant:"secondary"});o.getElement().addEventListener("click",()=>this.resetAll()),l.appendChild(h.getElement()),l.appendChild(r.getElement()),l.appendChild(o.getElement()),e.appendChild(l)}createSection(e){const t=document.createElement("div");t.className="arxis-transparency__section";const a=document.createElement("h4");return a.className="arxis-transparency__section-title",a.textContent=e,t.appendChild(a),t}createRuleItem(e){const t=document.createElement("div");t.className="arxis-transparency__rule-item",e.enabled||t.classList.add("arxis-transparency__rule-item--disabled");const a=document.createElement("div");a.className="arxis-transparency__rule-header";const n=document.createElement("span");n.className="arxis-transparency__rule-name",n.textContent=e.category;const d=new g({checked:e.enabled,onChange:s=>{e.enabled=s,this.render(),this.notifyChange()}});if(a.appendChild(n),a.appendChild(d.getElement()),t.appendChild(a),e.enabled){const s=document.createElement("div");s.className="arxis-transparency__control";const m=document.createElement("label");m.textContent="Opacidade:";const i=document.createElement("input");i.type="range",i.className="arxis-transparency__slider",i.min="0",i.max="1",i.step="0.05",i.value=String(e.opacity);const l=document.createElement("span");l.className="arxis-transparency__value",l.textContent=`${(e.opacity*100).toFixed(0)}%`,i.addEventListener("input",r=>{const o=parseFloat(r.target.value);e.opacity=o,l.textContent=`${(o*100).toFixed(0)}%`,this.notifyChange()}),s.appendChild(m),s.appendChild(i),s.appendChild(l),t.appendChild(s);const h=new g({label:"Isolar (outros transparentes)",checked:e.isolate,onChange:r=>{e.isolate=r,r&&(this.rules.forEach(o=>{o!==e&&(o.isolate=!1)}),this.render()),this.notifyChange()}});t.appendChild(h.getElement())}return t}applyXRayMode(){this.globalOpacity=.3,this.rules.forEach(e=>{e.enabled=!0,e.opacity=.3,e.isolate=!1}),this.render(),this.notifyChange()}applyGhostMode(){this.globalOpacity=.15,this.rules.forEach(e=>{e.enabled=!0,e.opacity=.15,e.isolate=!1}),this.render(),this.notifyChange()}resetAll(){this.globalOpacity=1,this.rules.forEach(e=>{e.enabled=!1,e.opacity=1,e.isolate=!1}),this.render(),this.notifyChange()}notifyChange(){this.onTransparencyChange?.(this.rules,this.globalOpacity)}getRules(){return this.rules.filter(e=>e.enabled)}getGlobalOpacity(){return this.globalOpacity}setGlobalOpacity(e){this.globalOpacity=Math.max(0,Math.min(1,e)),this.render(),this.notifyChange()}getElement(){return this.card.getElement()}destroy(){this.card.destroy()}}export{x as TransparencyControl};

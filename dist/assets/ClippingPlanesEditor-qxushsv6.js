import{C as E}from"./Card-DLSvBshn.js";import{B as r}from"./Button-BvNVdej2.js";import{T as p}from"./Toggle-D3VS2hV5.js";class v{card;planes=[];globalEnabled=!0;onPlanesChange;constructor(e){this.onPlanesChange=e?.onPlanesChange,this.card=new E({title:"âœ‚ï¸ Planos de Corte",variant:"glass"}),this.render()}render(){const e=this.card.getBody();e.innerHTML="";const t=new p({label:"Ativar Planos de Corte",checked:this.globalEnabled,onChange:a=>{this.globalEnabled=a,this.render(),this.notifyChange()}});if(e.appendChild(t.getElement()),this.globalEnabled){const a=this.createSection("Adicionar Plano"),l=document.createElement("div");if(l.className="arxis-clipping__quick-buttons",[{name:"X+",normal:{x:1,y:0,z:0},icon:"â–¶ï¸"},{name:"X-",normal:{x:-1,y:0,z:0},icon:"â—€ï¸"},{name:"Y+",normal:{x:0,y:1,z:0},icon:"â¬†ï¸"},{name:"Y-",normal:{x:0,y:-1,z:0},icon:"â¬‡ï¸"},{name:"Z+",normal:{x:0,y:0,z:1},icon:"ðŸ”¼"},{name:"Z-",normal:{x:0,y:0,z:-1},icon:"ðŸ”½"}].forEach(n=>{const i=new r({text:`${n.icon} ${n.name}`,variant:"secondary",size:"sm"});i.getElement().addEventListener("click",()=>this.addPlane(n.normal,n.name)),l.appendChild(i.getElement())}),a.appendChild(l),e.appendChild(a),this.planes.length>0){const n=this.createSection("Planos Ativos");this.planes.forEach(d=>{const s=this.createPlaneItem(d);n.appendChild(s)}),e.appendChild(n);const i=new r({text:"ðŸ—‘ï¸ Remover Todos",variant:"danger"});i.getElement().addEventListener("click",()=>{confirm("Remover todos os planos?")&&(this.planes=[],this.render(),this.notifyChange())}),e.appendChild(i.getElement())}else{const n=document.createElement("div");n.className="arxis-clipping__hint",n.textContent="Adicione planos de corte para visualizar o interior do modelo",e.appendChild(n)}}}createSection(e){const t=document.createElement("div");t.className="arxis-clipping__section";const a=document.createElement("h4");return a.className="arxis-clipping__section-title",a.textContent=e,t.appendChild(a),t}createPlaneItem(e){const t=document.createElement("div");t.className="arxis-clipping__plane-item",e.enabled||t.classList.add("arxis-clipping__plane-item--disabled");const a=document.createElement("div");a.className="arxis-clipping__plane-header";const l=document.createElement("span");l.className="arxis-clipping__plane-name",l.textContent=e.name;const m=new p({checked:e.enabled,onChange:n=>{e.enabled=n,this.render(),this.notifyChange()}});if(a.appendChild(l),a.appendChild(m.getElement()),t.appendChild(a),e.enabled){const n=document.createElement("div");n.className="arxis-clipping__info",n.innerHTML=`
        <span class="arxis-clipping__label">Normal:</span>
        <span class="arxis-clipping__vector">
          (${e.normal.x.toFixed(1)}, ${e.normal.y.toFixed(1)}, ${e.normal.z.toFixed(1)})
        </span>
      `,t.appendChild(n);const i=document.createElement("div");i.className="arxis-clipping__control";const d=document.createElement("label");d.textContent="PosiÃ§Ã£o:";const s=document.createElement("input");s.type="range",s.className="arxis-clipping__slider",s.min="-50",s.max="50",s.step="0.5",s.value=String(e.constant);const c=document.createElement("span");c.className="arxis-clipping__value",c.textContent=e.constant.toFixed(1),s.addEventListener("input",o=>{const g=parseFloat(o.target.value);e.constant=g,c.textContent=g.toFixed(1),this.notifyChange()}),i.appendChild(d),i.appendChild(s),i.appendChild(c),t.appendChild(i);const C=new p({label:"Inverter DireÃ§Ã£o",checked:e.negated,onChange:o=>{e.negated=o,this.notifyChange()}});t.appendChild(C.getElement());const h=new r({text:"ðŸ—‘ï¸ Remover",variant:"danger",size:"sm"});h.getElement().addEventListener("click",()=>{this.planes=this.planes.filter(o=>o.id!==e.id),this.render(),this.notifyChange()}),t.appendChild(h.getElement())}return t}addPlane(e,t){const a={id:`plane-${Date.now()}`,name:`Plano ${t}`,enabled:!0,normal:e,constant:0,negated:!1};this.planes.push(a),this.render(),this.notifyChange()}notifyChange(){this.onPlanesChange?.(this.planes,this.globalEnabled)}getPlanes(){return this.planes.filter(e=>e.enabled)}isEnabled(){return this.globalEnabled}clear(){this.planes=[],this.render(),this.notifyChange()}getElement(){return this.card.getElement()}destroy(){this.card.destroy()}}export{v as ClippingPlanesEditor};

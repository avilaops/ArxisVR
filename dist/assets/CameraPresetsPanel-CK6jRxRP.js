import{C as p}from"./Card-DLSvBshn.js";import{B as o}from"./Button-BvNVdej2.js";class u{card;presets=[];onPresetLoad;onPresetSave;constructor(e){this.onPresetLoad=e?.onPresetLoad,this.onPresetSave=e?.onPresetSave,this.card=new p({title:"ðŸ“· Vistas Salvas",variant:"glass"}),this.loadFromStorage(),this.initDefaultPresets(),this.render()}loadFromStorage(){try{const e=localStorage.getItem("arxis-camera-presets");e&&(this.presets=JSON.parse(e))}catch(e){console.error("Erro ao carregar presets:",e)}}saveToStorage(){try{localStorage.setItem("arxis-camera-presets",JSON.stringify(this.presets))}catch(e){console.error("Erro ao salvar presets:",e)}}initDefaultPresets(){this.presets.length===0&&(this.presets=[{id:"top",name:"Vista Superior",position:{x:0,y:100,z:0},target:{x:0,y:0,z:0},fov:50,timestamp:Date.now()},{id:"front",name:"Vista Frontal",position:{x:0,y:10,z:50},target:{x:0,y:10,z:0},fov:50,timestamp:Date.now()},{id:"side",name:"Vista Lateral",position:{x:50,y:10,z:0},target:{x:0,y:10,z:0},fov:50,timestamp:Date.now()},{id:"iso",name:"Vista IsomÃ©trica",position:{x:30,y:30,z:30},target:{x:0,y:0,z:0},fov:50,timestamp:Date.now()}])}render(){const e=this.card.getBody();e.innerHTML="";const t=document.createElement("div");t.className="arxis-camera-presets__save-section";const a=new o({text:"ðŸ’¾ Salvar Vista Atual",variant:"primary"});a.getElement().addEventListener("click",()=>this.saveCurrentView()),t.appendChild(a.getElement()),e.appendChild(t);const r=document.createElement("div");if(r.className="arxis-camera-presets__grid",this.presets.forEach(s=>{const n=this.createPresetCard(s);r.appendChild(n)}),e.appendChild(r),this.presets.length===0){const s=document.createElement("div");s.className="arxis-camera-presets__empty",s.textContent="Nenhuma vista salva ainda",e.appendChild(s)}}createPresetCard(e){const t=document.createElement("div");t.className="arxis-camera-presets__card";const a=document.createElement("div");a.className="arxis-camera-presets__thumbnail",e.thumbnail?a.style.backgroundImage=`url(${e.thumbnail})`:a.innerHTML="ðŸ“·",t.appendChild(a);const r=document.createElement("div");r.className="arxis-camera-presets__info";const s=document.createElement("div");s.className="arxis-camera-presets__name",s.textContent=e.name;const n=document.createElement("div");n.className="arxis-camera-presets__date",n.textContent=new Date(e.timestamp).toLocaleDateString("pt-BR"),r.appendChild(s),r.appendChild(n),t.appendChild(r);const i=document.createElement("div");i.className="arxis-camera-presets__actions";const d=new o({text:"ðŸ‘ï¸",variant:"secondary",size:"sm"});d.getElement().addEventListener("click",()=>this.loadPreset(e));const c=new o({text:"âœï¸",variant:"secondary",size:"sm"});c.getElement().addEventListener("click",()=>this.renamePreset(e));const m=new o({text:"ðŸ—‘ï¸",variant:"danger",size:"sm"});return m.getElement().addEventListener("click",()=>this.deletePreset(e.id)),i.appendChild(d.getElement()),i.appendChild(c.getElement()),i.appendChild(m.getElement()),t.appendChild(i),t.addEventListener("click",l=>{l.target.closest("button")||this.loadPreset(e)}),t}saveCurrentView(){const e=prompt("Nome da vista:");if(!e)return;const t=this.onPresetSave?.();if(t)this.presets.push({...t,id:`preset-${Date.now()}`,name:e,timestamp:Date.now()});else{const a={id:`preset-${Date.now()}`,name:e,position:{x:0,y:20,z:30},target:{x:0,y:0,z:0},fov:50,timestamp:Date.now()};this.presets.push(a)}this.saveToStorage(),this.render()}loadPreset(e){this.onPresetLoad?.(e),console.log("Vista carregada:",e.name)}renamePreset(e){const t=prompt("Novo nome:",e.name);t&&t!==e.name&&(e.name=t,this.saveToStorage(),this.render())}deletePreset(e){confirm("Excluir esta vista?")&&(this.presets=this.presets.filter(t=>t.id!==e),this.saveToStorage(),this.render())}addPreset(e){this.presets.push(e),this.saveToStorage(),this.render()}getPresets(){return this.presets}getElement(){return this.card.getElement()}destroy(){this.card.destroy()}}export{u as CameraPresetsPanel};

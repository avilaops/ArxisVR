import{C as _}from"./Card-DLSvBshn.js";import{B as C}from"./Button-BvNVdej2.js";import{T as v}from"./Toggle-D3VS2hV5.js";class w{card;config;animationFrame;onExplodeChange;constructor(e){this.onExplodeChange=e?.onExplodeChange,this.config={enabled:!1,factor:0,axis:"xyz",animated:!1,speed:1},this.card=new _({title:"üí• Vista Explodida",variant:"glass"}),this.render()}render(){const e=this.card.getBody();e.innerHTML="";const c=new v({label:"Ativar Vista Explodida",checked:this.config.enabled,onChange:o=>{this.config.enabled=o,o||(this.config.factor=0,this.stopAnimation()),this.render(),this.notifyChange()}});if(e.appendChild(c.getElement()),this.config.enabled){const o=this.createSection("Fator de Explos√£o"),t=document.createElement("div");t.className="arxis-explode__control";const i=document.createElement("input");i.type="range",i.className="arxis-explode__slider",i.min="0",i.max="3",i.step="0.1",i.value=String(this.config.factor);const h=document.createElement("span");h.className="arxis-explode__value",h.textContent=`${(this.config.factor*100).toFixed(0)}%`,i.addEventListener("input",n=>{const r=parseFloat(n.target.value);this.config.factor=r,h.textContent=`${(r*100).toFixed(0)}%`,this.notifyChange()}),t.appendChild(i),t.appendChild(h),o.appendChild(t),e.appendChild(o);const a=document.createElement("div");a.className="arxis-explode__quick-buttons",[{name:"0%",value:0},{name:"25%",value:.75},{name:"50%",value:1.5},{name:"100%",value:3}].forEach(n=>{const r=new C({text:n.name,variant:"secondary",size:"sm"});r.getElement().addEventListener("click",()=>{this.config.factor=n.value,this.render(),this.notifyChange()}),a.appendChild(r.getElement())}),e.appendChild(a);const d=this.createSection("Dire√ß√£o da Explos√£o"),s=document.createElement("select");s.className="arxis-explode__select",s.innerHTML=`
        <option value="xyz">Todas as Dire√ß√µes (XYZ)</option>
        <option value="x">Apenas Horizontal (X)</option>
        <option value="y">Apenas Vertical (Y)</option>
        <option value="z">Apenas Profundidade (Z)</option>
        <option value="radial">Radial (Centro)</option>
      `,s.value=this.config.axis,s.addEventListener("change",n=>{this.config.axis=n.target.value,this.notifyChange()}),d.appendChild(s),e.appendChild(d);const f=this.createSection("Anima√ß√£o"),E=new v({label:"Animar Explos√£o",checked:this.config.animated,onChange:n=>{this.config.animated=n,n?this.startAnimation():this.stopAnimation()}});if(f.appendChild(E.getElement()),this.config.animated){const n=document.createElement("div");n.className="arxis-explode__control";const r=document.createElement("label");r.textContent="Velocidade:";const l=document.createElement("input");l.type="range",l.className="arxis-explode__slider",l.min="0.1",l.max="3",l.step="0.1",l.value=String(this.config.speed);const m=document.createElement("span");m.className="arxis-explode__value",m.textContent=`${this.config.speed.toFixed(1)}x`,l.addEventListener("input",y=>{const u=parseFloat(y.target.value);this.config.speed=u,m.textContent=`${u.toFixed(1)}x`}),n.appendChild(r),n.appendChild(l),n.appendChild(m),f.appendChild(n)}e.appendChild(f);const g=document.createElement("div");g.className="arxis-explode__visual",g.innerHTML=this.createVisualDiagram(),e.appendChild(g);const x=new C({text:"üîÑ Resetar",variant:"secondary"});x.getElement().addEventListener("click",()=>{this.config.factor=0,this.config.axis="xyz",this.config.animated=!1,this.stopAnimation(),this.render(),this.notifyChange()}),e.appendChild(x.getElement())}}createSection(e){const c=document.createElement("div");c.className="arxis-explode__section";const o=document.createElement("h4");return o.className="arxis-explode__section-title",o.textContent=e,c.appendChild(o),c}createVisualDiagram(){const o=Math.min(this.config.factor/3,1),t=30*o;let i="";if(this.config.axis==="radial"||this.config.axis==="xyz")[{x:80-t,y:80-t},{x:100+t,y:80-t},{x:80-t,y:100+t},{x:100+t,y:100+t}].forEach((a,p)=>{i+=`<rect x="${a.x}" y="${a.y}" width="20" height="20" 
                     fill="rgba(0, 212, 255, 0.5)" stroke="#00d4ff" stroke-width="1"/>`});else for(let a=0;a<4;a++){let p=90,d=90;if(this.config.axis==="x")p=90+(a-4/2+.5)*(20+t);else if(this.config.axis==="y")d=90+(a-4/2+.5)*(20+t);else if(this.config.axis==="z"){const s=1-a/4*.5*o;p=100-10*s,d=100-10*s,i+=`<rect x="${p}" y="${d}" width="${20*s}" height="${20*s}" 
                       fill="rgba(0, 212, 255, ${.3+.4*(a/4)})" 
                       stroke="#00d4ff" stroke-width="1"/>`;continue}i+=`<rect x="${p}" y="${d}" width="20" height="20" 
                     fill="rgba(0, 212, 255, 0.5)" stroke="#00d4ff" stroke-width="1"/>`}return`
      <svg width="200" height="200" class="arxis-explode__svg">
        <!-- Center point -->
        <circle cx="100" cy="100" r="3" fill="rgba(255,255,255,0.4)"/>
        <circle cx="100" cy="100" r="6" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
        
        <!-- Exploded elements -->
        ${i}
      </svg>
    `}startAnimation(){let e=1;const c=()=>{this.config.animated&&(this.config.factor+=.02*this.config.speed*e,this.config.factor>=3?(this.config.factor=3,e=-1):this.config.factor<=0&&(this.config.factor=0,e=1),this.render(),this.notifyChange(),this.animationFrame=requestAnimationFrame(c))};this.animationFrame=requestAnimationFrame(c)}stopAnimation(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}notifyChange(){this.onExplodeChange?.(this.config)}getConfig(){return this.config}setExplodeFactor(e){this.config.factor=Math.max(0,Math.min(3,e)),this.render(),this.notifyChange()}getElement(){return this.card.getElement()}destroy(){this.stopAnimation(),this.card.destroy()}}export{w as ExplodeViewPanel};

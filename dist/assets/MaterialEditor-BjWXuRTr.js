import{C as M}from"./Card-DLSvBshn.js";import{B as v}from"./Button-BvNVdej2.js";class x{card;currentMaterial=null;onMaterialChange;constructor(e){this.onMaterialChange=e?.onMaterialChange,this.card=new M({title:"ðŸŽ¨ Editor de Materiais",variant:"glass"}),this.render()}render(){const e=this.card.getBody();e.innerHTML="";const r=this.createSection("Material Atual"),t=document.createElement("select");t.className="arxis-material-editor__select",t.innerHTML=`
      <option value="">Selecione um material...</option>
      <option value="concrete">Concreto</option>
      <option value="steel">AÃ§o</option>
      <option value="glass">Vidro</option>
      <option value="wood">Madeira</option>
    `,t.addEventListener("change",a=>{const s=a.target.value;s&&this.loadPreset(s)}),r.appendChild(t),e.appendChild(r);const o=this.createSection("Preview"),l=document.createElement("div");if(l.className="arxis-material-editor__preview",l.innerHTML='<div class="arxis-material-editor__sphere"></div>',o.appendChild(l),e.appendChild(o),this.currentMaterial){const a=this.createSection("Tipo"),s=document.createElement("select");s.className="arxis-material-editor__select",s.value=this.currentMaterial.type,s.innerHTML=`
        <option value="standard">Standard (PBR)</option>
        <option value="physical">Physical (PBR AvanÃ§ado)</option>
        <option value="basic">Basic (Sem iluminaÃ§Ã£o)</option>
        <option value="lambert">Lambert (Difuso)</option>
        <option value="phong">Phong (Especular)</option>
      `,s.addEventListener("change",n=>{this.currentMaterial&&(this.currentMaterial.type=n.target.value,this.notifyChange())}),a.appendChild(s),e.appendChild(a);const c=this.createSection("Cor Base"),i=document.createElement("input");i.type="color",i.className="arxis-material-editor__color",i.value=this.currentMaterial.color,i.addEventListener("change",n=>{this.currentMaterial&&(this.currentMaterial.color=n.target.value,this.updatePreview(),this.notifyChange())}),c.appendChild(i),e.appendChild(c),(this.currentMaterial.type==="standard"||this.currentMaterial.type==="physical")&&(e.appendChild(this.createSlider("Metalness",this.currentMaterial.metalness,0,1,.01,n=>{this.currentMaterial&&(this.currentMaterial.metalness=n,this.updatePreview(),this.notifyChange())})),e.appendChild(this.createSlider("Roughness",this.currentMaterial.roughness,0,1,.01,n=>{this.currentMaterial&&(this.currentMaterial.roughness=n,this.updatePreview(),this.notifyChange())}))),e.appendChild(this.createSlider("Opacidade",this.currentMaterial.opacity,0,1,.01,n=>{this.currentMaterial&&(this.currentMaterial.opacity=n,this.updatePreview(),this.notifyChange())}));const d=this.createSection("Cor Emissiva"),h=document.createElement("input");h.type="color",h.className="arxis-material-editor__color",h.value=this.currentMaterial.emissive,h.addEventListener("change",n=>{this.currentMaterial&&(this.currentMaterial.emissive=n.target.value,this.updatePreview(),this.notifyChange())}),d.appendChild(h),e.appendChild(d),e.appendChild(this.createSlider("Intensidade Emissiva",this.currentMaterial.emissiveIntensity,0,2,.1,n=>{this.currentMaterial&&(this.currentMaterial.emissiveIntensity=n,this.updatePreview(),this.notifyChange())}));const p=document.createElement("div");p.className="arxis-material-editor__actions";const u=new v({text:"ðŸ’¾ Salvar",variant:"primary"});u.getElement().addEventListener("click",()=>this.saveMaterial());const m=new v({text:"ðŸ”„ Resetar",variant:"secondary"});m.getElement().addEventListener("click",()=>this.resetMaterial()),p.appendChild(u.getElement()),p.appendChild(m.getElement()),e.appendChild(p)}else{const a=document.createElement("div");a.className="arxis-material-editor__hint",a.textContent="Selecione um material para editar",e.appendChild(a)}this.updatePreview()}createSection(e){const r=document.createElement("div");r.className="arxis-material-editor__section";const t=document.createElement("label");return t.className="arxis-material-editor__label",t.textContent=e,r.appendChild(t),r}createSlider(e,r,t,o,l,a){const s=this.createSection(e),c=document.createElement("div");c.className="arxis-material-editor__slider-container";const i=document.createElement("input");i.type="range",i.className="arxis-material-editor__slider",i.min=String(t),i.max=String(o),i.step=String(l),i.value=String(r);const d=document.createElement("span");return d.className="arxis-material-editor__value",d.textContent=r.toFixed(2),i.addEventListener("input",h=>{const p=parseFloat(h.target.value);d.textContent=p.toFixed(2),a(p)}),c.appendChild(i),c.appendChild(d),s.appendChild(c),s}loadPreset(e){const t={concrete:{name:"Concreto",type:"standard",color:"#888888",metalness:0,roughness:.9,opacity:1,emissive:"#000000",emissiveIntensity:0},steel:{name:"AÃ§o",type:"standard",color:"#aaaaaa",metalness:1,roughness:.3,opacity:1,emissive:"#000000",emissiveIntensity:0},glass:{name:"Vidro",type:"physical",color:"#ffffff",metalness:0,roughness:0,opacity:.3,emissive:"#000000",emissiveIntensity:0},wood:{name:"Madeira",type:"standard",color:"#8b5a2b",metalness:0,roughness:.8,opacity:1,emissive:"#000000",emissiveIntensity:0}}[e];t&&(this.currentMaterial={id:e,name:t.name,type:t.type,color:t.color,metalness:t.metalness,roughness:t.roughness,opacity:t.opacity,emissive:t.emissive,emissiveIntensity:t.emissiveIntensity},this.render())}updatePreview(){if(!this.currentMaterial)return;const e=document.querySelector(".arxis-material-editor__sphere");if(!e)return;const r=parseInt(this.currentMaterial.color.slice(1,3),16),t=parseInt(this.currentMaterial.color.slice(3,5),16),o=parseInt(this.currentMaterial.color.slice(5,7),16),l=this.currentMaterial.metalness,a=this.currentMaterial.roughness;e.style.background=`
      radial-gradient(
        circle at 30% 30%,
        rgba(${r+40}, ${t+40}, ${o+40}, ${this.currentMaterial.opacity}),
        rgba(${r}, ${t}, ${o}, ${this.currentMaterial.opacity})
      )
    `,l>.5?e.style.boxShadow=`
        inset -10px -10px 30px rgba(0, 0, 0, ${.5*a}),
        inset 10px 10px 30px rgba(255, 255, 255, ${.3*(1-a)})
      `:e.style.boxShadow=`
        inset -5px -5px 15px rgba(0, 0, 0, ${.3*a}),
        0 5px 15px rgba(0, 0, 0, 0.3)
      `}notifyChange(){this.currentMaterial&&this.onMaterialChange&&this.onMaterialChange(this.currentMaterial)}saveMaterial(){this.currentMaterial&&console.log("Material salvo:",this.currentMaterial)}resetMaterial(){if(this.currentMaterial){const e=this.currentMaterial.id;this.loadPreset(e)}}setMaterial(e){this.currentMaterial=e,this.render()}getElement(){return this.card.getElement()}destroy(){this.card.destroy()}}export{x as MaterialEditor};
